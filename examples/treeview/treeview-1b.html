<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ARIA Treview Example 1a: File Viewer</title>
    <link href="../css/core.css" rel="stylesheet">
    <link href="../css/table.css" rel="stylesheet">
    <link href="css/treeview-1.css" rel="stylesheet">
    <script type="text/javascript" src="http://www.oaa-accessibility.org/media/examples/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="../js/examples.js"></script>
    <script type="text/javascript" src="js/treeview.js"></script>
    <script type="text/javascript" src="js/treeview-1-onclick.js"></script>

  </head>
  <body>
    <header>
      <h1>ARIA Tree View Examples</h1>

      <nav>
        <ul>
          <li><a href="treeviews.html">Overview</a></li>
          <li><a href="treeview-1a.html">Treeview 1a</a></li>
          <li class="active"><a href="treeview-1b.html" aria-current="page">Treeview 1b</a></li>
          <li><a href="treeview-2a.html">Treeview 2a</a></li>
          <li><a href="treeview-2b.html">Treeview 2b</a></li>
        </ul>
      </nav>

    </header>

    <main>
      <h1 id="id1">Treeview 1b: File Viewer</h1>

      <ul>
        <li>In this example the ARIA treeview relationships (e.g. <code>tree</code>, <code>group</code> and <code>treeitem</code>) are defined in the parent child relationships defined in the DOM structure.</li>
        <li>This example the author specifies the values of <code>aria-level</code>, <code>aria-setsize</code> and <code>aria-posinset</code> for communication to accessibility APIs.  Therefore this example does not rely on the browser to compute these values.</li>
        <li><a href="https://www.w3.org/TR/wai-aria-practices-1.1/#TreeView">WAI-ARIA 1.1: Tree View authoring practices</a></li>
      </ul>


      <h2 id="ex_title">Example</h2>
      
      <section id="example" aria-labelledby="ex_title">  

        <div id="code-ex-1">
          <h3 id="tree1">File Viewer</h3>
          <ul role="tree" aria-labelledby="tree1" >
            <li role="treeitem"
                aria-level="1" 
                aria-setsize="3" 
                aria-posinset="1" 
                aria-expanded="false" 
                aria-label="Projects">
              <span> Projects</span>
              <ul role="group">
                <li role="treeitem" aria-level="2" aria-setsize="5" aria-posinset="1" class="doc"> project-1.docx</li>
                <li role="treeitem" aria-level="2" aria-setsize="5" aria-posinset="2" class="doc" class="doc"> project-2.docx</li>
                <li role="treeitem" 
                    aria-level="2" 
                    aria-setsize="5" 
                    aria-posinset="3"
                    aria-expanded="false" 
                    aria-label="project-3">
                  <span> project-3</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="1" class="doc"> project-3A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="2" class="doc"> project-3B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="3" class="doc"> project-3C.docx</li>
                  </ul>
                </li>  
                <li role="treeitem" aria-level="2" aria-setsize="5" aria-posinset="4" class="doc"> project-4.docx</li>
                <li role="treeitem"
                    aria-level="2" 
                    aria-setsize="5" 
                    aria-posinset="5"
                    aria-expanded="false" 
                    aria-label="project-5">
                  <span> project-5</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="1" class="doc"> project-5A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="2" class="doc"> project-5B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="3" class="doc"> project-5C.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="4" class="doc"> project-5D.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="5" class="doc"> project-5E.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="6" aria-posinset="6" class="doc"> project-5F.docx</li>
                  </ul>
                </li>    
              </ul>
            </li>
           <li role="treeitem"
                aria-level="1" 
                aria-setsize="3" 
                aria-posinset="2" 
                aria-expanded="false" 
                aria-label="Reports">
              <span> Reports</span>
              <ul role="group">
                <li role="treeitem" 
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="1"
                    aria-expanded="false" 
                    aria-label="report-1">
                  <span> report-1</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="1" class="doc"> report-1A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="2" class="doc"> report-1B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="3" class="doc"> report-1C.docx</li>
                  </ul>
                </li>  
                <li role="treeitem"  
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="2"
                    aria-expanded="false" 
                    aria-label="report-2">
                  <span> report-2</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="1" class="doc"> report-2A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="2" class="doc"> report-2B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="3" class="doc"> report-2C.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="4" class="doc"> report-2D.docx</li>
                  </ul>
                </li>    
                <li role="treeitem"  
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="3"
                    aria-expanded="false" 
                    aria-label="report-3">
                  <span> report-3</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="1" class="doc"> report-3A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="2" class="doc"> report-3B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="3" class="doc"> report-3C.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="4" class="doc"> report-3D.docx</li>
                  </ul>
                </li>    
              </ul>
            </li>
            <li role="treeitem" 
                aria-level="1" 
                aria-setsize="3" 
                aria-posinset="3" 
                aria-expanded="false" 
                aria-label="Letters">
              <span> Letters</span>
              <ul role="group">
                <li role="treeitem" 
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="1"
                    aria-expanded="false" 
                    aria-label="letter-1">
                  <span> letter-1</span>
                  <ul>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="1" class="doc"> letter-1A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="2" class="doc"> letter-1B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="3" aria-posinset="3" class="doc"> letter-1C.docx</li>
                  </ul>
                </li>  
                <li role="treeitem"  
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="2"
                    aria-expanded="false" 
                    aria-label="letter-2">
                  <span> letter-2</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="1" class="doc"> letter-2A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="2" class="doc"> letter-2B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="3" class="doc"> letter-2C.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="4" class="doc"> letter-2D.docx</li>
                  </ul>
                </li>    
                <li role="treeitem"  
                    aria-level="2" 
                    aria-setsize="3" 
                    aria-posinset="3"
                    aria-expanded="false" 
                  aria-label="letter-3">
                  <span> letter-3</span>
                  <ul role="group">
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="1" class="doc"> letter-3A.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="2" class="doc"> letter-3B.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="3" class="doc"> letter-3C.docx</li>
                    <li role="treeitem" aria-level="3" aria-setsize="4" aria-posinset="4" class="doc"> letter-3D.docx</li>
                  </ul>
                </li>    
              </ul>
            </li>
          </ul>
          <p><label>File or Folder Selected: <input id="last_action" type="output" size="15"></label></p>
        </div>
      </section>

           <section aria-labelledby="id_kbd">
             
             <h3 id="id_kbd">Keyboard Interaction and Focus Management</h3>
             
             <table aria-labelledby="id_kbd">
               <thead>
                 <tr>
                   <th>Key</th>
                   <th>Function</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>Up arrow Key</td>
                   <td>Moves focus to previous visible sibling <code>treeitem</code> using a depth first algorithm on the visible <code>treeitems</code>. If on first <code>treeitem</code>, focus stays on first <code>treeitem</code>.</td>
                 </tr>
                 <tr>
                   <td>Down arrow Key</td>
                   <td>Moves focus to next visible sibling <code>treeitem</code> using a depth first algorithm on the visible <code>treeitems</code>. If on last <code>treeitem</code>, focus stays on the last <code>treeitem</code>.</td>
                 </tr>            <tr>
                   <td>Left Arrow Key</td>
                   <td>
                     <ul>
                       <li>For a <code>treeitem</code> that is an end node (e.g. no child <code>treeitem</code>s) or is in the collapsed state (e.g. has <code>[aria-expanded=false]</code>), focus moves to the parent <code>treeitem</code>.
                         If a top level <code>treeitem</code> (e.g. parent is <code>tree</code>), focus stays on current <code>treeitem</code>.
                       </li>
                       <li>For a <code>treeitem</code> that is in the expanded state (e.g. has <code>[aria-expanded=true]</code>) it toogles to the collapsed state.   Focus remains on the current <code>treeitem</code>.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>Right Arrow Key</td>
                   <td>
                     <ul>
                       <li>For a <code>treeitem</code> that is an end node (e.g. no child <code>treeitem</code>s) focus stays on current <code>treeitem</code>.</li>
                       <li>For a <code>treeitem</code> that is in the collapsed state (e.g. has <code>[aria-expanded=false]</code>) it toogles to the expanded state and focus moves to the first child <code>treeitem</code>.  If no child, focus stays on current <code>treeitem</code>.</li>
                       <li>For a <code>treeitem</code> is in the expanded state, focus moves to the first child <code>treeitem</code>.
                         If no child, focus stays on current <code>treeitem</code>.
                       </li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>Return Key</td>
                   <td>Performs the default action (e.g. onclick event) on the current <code>treeitem</code>.</td>
                 </tr>
                 <tr>
                   <td>Space Key</td>
                   <td>Performs the default action (e.g. onclick event) on the current <code>treeitem</code>.</td>
                 </tr>
                 <tr>
                   <td>Home Key</td>
                   <td>Moves focus to first <code>treeitem</code> in the <code>tree</code>.</td>
                 </tr>
                 <tr>
                   <td>End Key</td>
                   <td>Moves focus to last visible <code>treeitem</code> (e.g. depth first) in the <code>tree</code>.</td>
                 </tr>
                 <tr>
                   <td>a-z, A-Z</td>
                   <td>
                     <ul>
                       <li>Moves focus to next visible <code>treeitem</code> that starts with letter character.</li>
                       <li>Search wraps to first <code>treeitem</code> if not found after current <code>treeitem</code>.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>*</td>
                   <td>Opens all the expandable <code>treeitem</code>s in the current leaf (e.g. siblings of the current <code>treeitem</code>), keyboard focus does not change.
                   </td>
                 </tr>
               </tbody>
             </table>
             
            </section>


            <section aria-labelledby="id_roles">
             <h3 id="id_roles">ARIA Roles</h3>
             
             <table aria-labelledby="id_roles">
               <thead>
                 <tr>
                   <th>Role</th>
                   <th>Usage</th>
                   <th>Accessible Name Source</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>tree</td>
                   <td>The tree view container has a <code>role=tree</code>.</td>
                   <td><code>aria-labelledby</code> to a visible label.</td>
                 </tr>
                 <tr>
                   <td>treeitem</td>
                   <td>Each interactive item in the tree view has the <code>role=treeitem</code> and is a DOM child of tree.</td>
                   <td>
                     <ul>
                       <li>Child text content of <code>treeitem</code>.</li>
                       <li><code>aria-label</code> for <code>treeitem</code>s that expand and collapse.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>group</td>
                   <td>
                      <ul>
                        <li>A collection of <code>treeitem</code>s to be expanded and collapsed are enclosed in a element with <code>role=group</code>.</li>
                        <li>The <code>role=group</code> on the <code>ul</code> element overrides the default role of <code>list</code>.</li>
                      </ul>
                    </td>
                   <td>not needed</td>
                 </tr>
               </tbody>
             </table>
            </section>


            <section aria-labelledby="id_props">
             
             <h3 id="id_props">ARIA Properties and States</h3>
             
             <table aria-labelledby="id_props">
               <thead>
                 <tr>
                   <th>Property/State</th>
                   <th>Usage</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>aria-expanded</td>
                   <td>
                     <ul>
                       <li>Each element with <code>role=treeitem</code> that can be expanded or collapsed has an <code>aria-expanded</code> attribute.</li>
                       <li>Each element with <code>role=treeitem</code> which is expanded sets <code> aria-expanded="true"</code>.</li>
                       <li>Each element with <code>role=treeitem</code> which is collapsed sets <code> aria-expanded="false"</code>.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>aria-labelledby</td>
                   <td>Provides accessible name for the <code>tree</code> role.</td>
                 </tr>
                 <tr>
                   <td>aria-label</td>
                   <td>Provides accessible name for the <code>treeitem</code>s that are expandable and collapsable.</td>
                 </tr>
                 <tr>
                   <td>aria-level<br/>(explicit)</td>
                   <td>
                     <ul>
                       <li>Provides level information on how <em>deep</em> a <code>treeitem</code> is the nested structure of the treeview.</li>
                       <li>This example is explicitly defines the value of the <code>aria-level</code> property and therefore does not rely on the user agent computing the value based on treeviewå structure.</li>
                       <li>The <code>aria-level</code> property is based on the nesting of the <code>treeitem</code> in structure in the treeview.</li>
                       <li>Assistive technologies need use <code>aria-level</code> to inform users of changes in level as the user navigates the tree structure with keyboard commands.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>aria-setsize<br/>(explicit)</td>
                   <td>
                     <ul>
                       <li>Provides information on the <em>number</em> of <code>treeitems</code> in the branch of the tree.</li>                       
                       <li>This example is explicitly defines the value of the <code>aria-setsize</code> property and therefore does not rely on the user agent computing the value based on treeview structure.</li>
                       <li>Assistive technologies use <code>aria-setsize</code> information to inform the user of how may items are in the leaf of a treeview.</li>
                      </td>
                 </tr>
                 <tr>
                   <td>aria-posinset<br/>(explict)</td>
                   <td>
                     <ul>
                       <li>Provides information on the <em>position</em> of a <code>treeitem</code> in the branch of the tree.</li>
                       <li>This example is explicitly defines the value of the <code>aria-posinset</code> property and therefore does not rely on the user agent computing the value based on treeview structure.</li>
                       <li>Assistive technologies use <code>aria-posinset</code> information to inform the user of position of the <code>treeitem</code> in a branch of a tree.</li>
                       </ul>
                    </td>
                 </tr>
               </tbody>
             </table>
             
            </section>

           <section aria-labelledby="id_tabindex">
             
             <h3 id="id_tabindex"><code>tabindex</code> values</h3>
             
             <table aria-labelledby="id_tabindex">
               <thead>
                 <tr>
                   <th style="min-width: 8em;" title="Element Selector">Elements</th>
                   <th style="min-width: 4em;">Values</th>
                   <th>Purpose</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>[role=treeitem]</td>
                   <td>0 or -1</td>
                   <td>When the element with <code>role=treeitem</code> has focus, <code>tabindex</code> is set to 0, all other <code>treeitem</code>s are set to a <code>tabindex</code> value of -1.</td>
                 </tr>
               </tbody>
             </table>
             
           </section>
           
           <section aria-labelledby="id_events">
             
             <h3 id="id_events">Events</h3>
             <table aria-labelledby="id_events">
               <thead>
                 <tr>
                   <th>Event</th>
                   <th>Element</th>
                   <th>Description</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>keydown</td>
                   <td>[role=treeitem]</td>
                   <td>
                     <ul>
                       <li>A <code>keydown</code> event listener is added to each element with <code>role=treeitem</code> to support moving focus between the <code>treeitem</code> with the keyboard.</li>
                       <li>The <code>keydown</code> event listener is used for identifying the key codes associated with the <kbd>Left</kbd>, <kbd>Right</kbd>, <kbd>Up</kbd>, <kbd>Down</kbd>, <kbd>Home</kbd>, <kbd>End</kbd>, <kbd>Enter</kbd> and <kbd>space</kbd> keys.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>keypress</td>
                   <td>[role=treeitem]</td>
                   <td>
                     <ul>
                       <li>A <code>keypress</code> event listener is added to each element with <code>role=treeitem</code> to support moving focus between the <code>treeitem</code> with the keyboard.</li>
                       <li>The <code>keypress</code> event listener is used for identifying the characters associated with the <kbd>a-z</kbd>, <kbd>A-Z</kbd> and <kbd>*</kbd> when typed by the user, since the <code>keypress</code> event computes a character based on the combination of the keys typed by the user.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>click</td>
                   <td>[role=treeitem][aria-expanded]</td>
                   <td>
                     <ul>
                       <li>Click event listener is added to each element with <code>role=treeitem</code> and <code>aria-expanded</code> to support opening and closing a branch of the tree with the mouse.</li>
                       <li>Click triggers "action" event associated with the element with <code>role=treeitem</code>, in this example the textbox is updated with the label of the current <code>treeitem</code>.</li>
                     </ul>
                   </td>
                 </tr>
                 <tr>
                   <td>focus</td>
                   <td>[role=treeitem]</td>
                   <td>Focus event listener is added to each element with <code>role=treeitem</code> to support visual styling of the <code>treeitem</code> when it recieves focus.</td>
                 </tr>
                 <tr>
                   <td>blur</td>
                   <td>[role=treeitem]</td>
                   <td>Blur event listener is added to each element with <code>role=treeitem</code> to support visual styling of the <code>treeitem</code> when it does not have focus.</td>
                 </tr>
               </tbody>
             </table>
             
           </section>
           
           <section aria-labelledby="id_focus">
             
             <h3 id="id_focus">Keyboard Focus Styling</h3>
             
             <table aria-labelledby="id_focus">
               <thead>
                 <tr>
                   <th style="min-width: 8em;" title="Element Selector">Elements</th>
                   <th>Focus Style</th>
                   <th>Focus Technique</th>
                 </tr>
               </thead>
               <tbody>
                 <tr>
                   <td>[role=treeitem]</td>
                   <td>
                     <ul>
                       <li>border</li>
                       <li>background-color</li>
                     </ul>
                   </td>
                   <td><code>focus</code> and <code>blur</code> events are used to add and remove a "focus" class to the <code>treeitem</code> element.</td>
                 </tr>
                 <tr>
                   <td>[role=treeitem][aria-expanded]</td>
                   <td>
                     <ul>
                       <li>border</li>
                       <li>background-color</li>
                     </ul>
                   </td>
                   <td><code>focus</code> and <code>blur</code> events are used to add and remove a "focus" class to the first child element (e.g <code>span</code> element) of the <code>treeitem</code> element.</td>
                 </tr>
               </tbody>
             </table>
             
           </section>
           
            <section aria-labelledby="id_sync">
              
              <h3 id="id_sync">Synchronization of Visual and ARIA States</h3>
              
              <table aria-labelledby="id_sync">
                <thead>
                  <tr>
                    <th style="min-width: 8em;" title="Element Selector">Elements</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>[role=treeitem][aria-expanded]</td>
                    <td>
                      <ul>
                        <li>The CSS <code>:before</code> psuedo selector for <code>[aria-expanded=false]</code> and <code>[aria-expanded=true]</code> are used to change the CSS <code>content</code> property.</li>
                        <li>The image source defined in the CSS <code>content</code> property is used to visually indicate the expanded and collapsed states of an expandable <code>treeitem</code>.</li>
                        <li>The <code>content</code> property is preferred since it supports rendering of the image in high contrast settings of browsers and operating systems.  Other CSS techniques like <code>background-image</code> are not endered in high contrast modes.</li>
                      </ul>  
                    </td>
                  </tr>
                </tbody>
              </table>
              
            </section>


      <section aria-labelledby="sc-ex1">
        <h2 id="sc-ex1">Source Code: Example</h2>
      
        <ul>
          <li>HTML: <a href="treeview-1b-code.html" type="text/css">treeview-1b-code.html</a></li>
          <li>CSS: <a href="css/treeview-1.css" type="tex/css">treeview-1.css</a></li>
          <li>Javascript: <a href="js/treeview.js" type="text/javascript">treeview.js</a></li>
          <li>Javascript: <a href="js/treeview-1-onclick.js" type="text/javascript">treeview-1-onclick.js</a></li>
        </ul>
      
        <div id="sc1">
       
        </div>
      </section>


      <script>
        sourceCode.add('sc1', 'code-ex-1')
        sourceCode.make()
      </script>


  </main>
  </body>
  </html>